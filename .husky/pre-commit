#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Pre-commit hook for code quality checks
echo "ğŸ” Running pre-commit checks..."

# Change to web directory
cd web

# Type checking
echo "ğŸ“ Type checking..."
pnpm type-check || exit 1

# Linting
echo "ğŸ”§ Linting code..."
pnpm lint || exit 1

# Format check
echo "ğŸ’… Checking code formatting..."
pnpm format:check || exit 1

# Run tests (if they exist)
if [ -f "jest.config.js" ] || [ -f "jest.config.ts" ]; then
  echo "ğŸ§ª Running tests..."
  pnpm test --passWithNoTests || exit 1
fi

echo "âœ… Pre-commit checks passed!"